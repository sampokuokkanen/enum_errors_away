  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (6.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (10.9ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000143b17bc0> Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:50:29.695540"], ["updated_at", "2025-09-16 05:50:29.695540"], ["mbo_evaluation_create_condition", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (10.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (6.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000102e47458> Create (6.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:57:23.856727"], ["updated_at", "2025-09-16 05:57:23.856727"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (7.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000011f8f2da0> Create (1.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:58:00.280342"], ["updated_at", "2025-09-16 05:58:00.280342"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000013337fb48> Create (4.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:58:27.487323"], ["updated_at", "2025-09-16 05:58:27.487323"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (5.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000102ffa520> Create (6.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:59:19.719796"], ["updated_at", "2025-09-16 05:59:19.719796"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x00000001053d4ec8> Create (0.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-09-16 05:59:34.242966"], ["updated_at", "2025-09-16 05:59:34.242966"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000123a09b18> Create (1.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:16:04.527450"], ["updated_at", "2025-10-14 09:16:04.527450"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012e909258> Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:19:04.929690"], ["updated_at", "2025-10-14 09:19:04.929690"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000115347770> Create (3.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:19:21.607718"], ["updated_at", "2025-10-14 09:19:21.607718"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012df519b8> Create (8.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:19:50.453152"], ["updated_at", "2025-10-14 09:19:50.453152"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.551820', '2025-10-14 09:19:50.551822') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["created_at", "2025-10-14 09:19:50.674729"], ["updated_at", "2025-10-14 09:19:50.674729"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (1.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.716204', '2025-10-14 09:19:50.716206') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["created_at", "2025-10-14 09:19:50.725624"], ["updated_at", "2025-10-14 09:19:50.725624"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-10-14 09:19:50.728715"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.757259', '2025-10-14 09:19:50.757261') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["created_at", "2025-10-14 09:19:50.763194"], ["updated_at", "2025-10-14 09:19:50.763194"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.775182', '2025-10-14 09:19:50.775184') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["created_at", "2025-10-14 09:19:50.778358"], ["updated_at", "2025-10-14 09:19:50.778358"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["created_at", "2025-10-14 09:19:50.780821"], ["updated_at", "2025-10-14 09:19:50.780821"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["created_at", "2025-10-14 09:19:50.781792"], ["updated_at", "2025-10-14 09:19:50.781792"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.3ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.805948', '2025-10-14 09:19:50.805950') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["created_at", "2025-10-14 09:19:50.812167"], ["updated_at", "2025-10-14 09:19:50.812167"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.841387', '2025-10-14 09:19:50.841388') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:19:50.842974"], ["updated_at", "2025-10-14 09:19:50.842974"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.846325', '2025-10-14 09:19:50.846326') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.852268', '2025-10-14 09:19:50.852268') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["created_at", "2025-10-14 09:19:50.853247"], ["updated_at", "2025-10-14 09:19:50.853247"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.858364', '2025-10-14 09:19:50.858365') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["created_at", "2025-10-14 09:19:50.858748"], ["updated_at", "2025-10-14 09:19:50.858748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.861670', '2025-10-14 09:19:50.861671') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["created_at", "2025-10-14 09:19:50.862006"], ["updated_at", "2025-10-14 09:19:50.862006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-10-14 09:19:50.863432"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.868510', '2025-10-14 09:19:50.868510') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.871320', '2025-10-14 09:19:50.871321') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["created_at", "2025-10-14 09:19:50.871775"], ["updated_at", "2025-10-14 09:19:50.871775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.873890', '2025-10-14 09:19:50.873891') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["created_at", "2025-10-14 09:19:50.874762"], ["updated_at", "2025-10-14 09:19:50.874762"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.883368', '2025-10-14 09:19:50.883370') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["created_at", "2025-10-14 09:19:50.884517"], ["updated_at", "2025-10-14 09:19:50.884517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["created_at", "2025-10-14 09:19:50.885566"], ["updated_at", "2025-10-14 09:19:50.885566"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["created_at", "2025-10-14 09:19:50.889329"], ["updated_at", "2025-10-14 09:19:50.889329"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.894794', '2025-10-14 09:19:50.894985') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["created_at", "2025-10-14 09:19:50.896352"], ["updated_at", "2025-10-14 09:19:50.896352"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:19:50.899004', '2025-10-14 09:19:50.899005') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["created_at", "2025-10-14 09:19:50.899394"], ["updated_at", "2025-10-14 09:19:50.899394"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:16.841468', '2025-10-14 09:21:16.841471') RETURNING "key"[0m
  [1m[36mOrganization Delete All (1.5ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (3.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:16.918148"], ["updated_at", "2025-10-14 09:21:16.918148"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:16.955848', '2025-10-14 09:21:16.955849') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-14 09:21:16.964132"], ["updated_at", "2025-10-14 09:21:16.964132"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:16.987014', '2025-10-14 09:21:16.987016') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:16.998625"], ["updated_at", "2025-10-14 09:21:16.998625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.020216', '2025-10-14 09:21:17.020217') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:17.023778"], ["updated_at", "2025-10-14 09:21:17.023778"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:17.032335"], ["updated_at", "2025-10-14 09:21:17.032335"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:17.035907"], ["updated_at", "2025-10-14 09:21:17.035907"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.050489', '2025-10-14 09:21:17.050491') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.073205', '2025-10-14 09:21:17.073207') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.075093"], ["updated_at", "2025-10-14 09:21:17.075093"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.083953', '2025-10-14 09:21:17.083980') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.086779', '2025-10-14 09:21:17.086780') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.087138"], ["updated_at", "2025-10-14 09:21:17.087138"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 09:21:17.090848"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.120343', '2025-10-14 09:21:17.120345') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 09:21:17.122240"], ["updated_at", "2025-10-14 09:21:17.122240"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.134246', '2025-10-14 09:21:17.134248') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.135027"], ["updated_at", "2025-10-14 09:21:17.135027"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.140673', '2025-10-14 09:21:17.140674') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:17.141776"], ["updated_at", "2025-10-14 09:21:17.141776"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.145083', '2025-10-14 09:21:17.145084') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.145546"], ["updated_at", "2025-10-14 09:21:17.145546"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 09:21:17.146375"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.156435', '2025-10-14 09:21:17.156437') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 09:21:17.157935"], ["updated_at", "2025-10-14 09:21:17.157935"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.164873', '2025-10-14 09:21:17.164874') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.167696"], ["updated_at", "2025-10-14 09:21:17.167696"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.172499"], ["updated_at", "2025-10-14 09:21:17.172499"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:17.173587"], ["updated_at", "2025-10-14 09:21:17.173587"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.184096', '2025-10-14 09:21:17.184297') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:17.185155"], ["updated_at", "2025-10-14 09:21:17.185155"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.188967', '2025-10-14 09:21:17.188968') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-14 09:21:17.189290"], ["updated_at", "2025-10-14 09:21:17.189290"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.195226', '2025-10-14 09:21:17.195228') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 09:21:17.214771"], ["updated_at", "2025-10-14 09:21:17.214771"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.1ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.229172', '2025-10-14 09:21:17.229173') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.244064', '2025-10-14 09:21:17.244065') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 09:21:17.258667"], ["updated_at", "2025-10-14 09:21:17.258667"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-14 09:21:17.262871"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.266853', '2025-10-14 09:21:17.266855') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.293689', '2025-10-14 09:21:17.293690') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.303750', '2025-10-14 09:21:17.303751') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.311528', '2025-10-14 09:21:17.311529') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.320410', '2025-10-14 09:21:17.320411') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:17.326525', '2025-10-14 09:21:17.326526') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012a8df290> Create (1.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:21:17.351640"], ["updated_at", "2025-10-14 09:21:17.351640"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x00000001127b9248> Create (4.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 09:21:43.073097"], ["updated_at", "2025-10-14 09:21:43.073097"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.141829', '2025-10-14 09:21:43.141831') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.173017', '2025-10-14 09:21:43.173019') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.195145', '2025-10-14 09:21:43.195147') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.211851', '2025-10-14 09:21:43.211853') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.228101', '2025-10-14 09:21:43.228104') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.4ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 09:21:43.234253"], ["updated_at", "2025-10-14 09:21:43.234253"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (1.4ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.266784', '2025-10-14 09:21:43.266786') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.275745', '2025-10-14 09:21:43.275745') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 09:21:43.282603"], ["updated_at", "2025-10-14 09:21:43.282603"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.2ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-14 09:21:43.287974"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.314396', '2025-10-14 09:21:43.314398') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.324424', '2025-10-14 09:21:43.324430') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.336715', '2025-10-14 09:21:43.336717') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.364705"], ["updated_at", "2025-10-14 09:21:43.364705"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 09:21:43.373922"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.384491', '2025-10-14 09:21:43.384492') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.389389', '2025-10-14 09:21:43.389390') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.391916"], ["updated_at", "2025-10-14 09:21:43.391916"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 09:21:43.394573"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.406101', '2025-10-14 09:21:43.406103') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-14 09:21:43.406764"], ["updated_at", "2025-10-14 09:21:43.406764"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.416007', '2025-10-14 09:21:43.416008') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.417819"], ["updated_at", "2025-10-14 09:21:43.417819"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.437034', '2025-10-14 09:21:43.437214') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.453190"], ["updated_at", "2025-10-14 09:21:43.453190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.460580', '2025-10-14 09:21:43.460581') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.462434"], ["updated_at", "2025-10-14 09:21:43.462434"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.463086"], ["updated_at", "2025-10-14 09:21:43.463086"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.464397"], ["updated_at", "2025-10-14 09:21:43.464397"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.472205', '2025-10-14 09:21:43.472206') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 09:21:43.476923"], ["updated_at", "2025-10-14 09:21:43.476923"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.484007', '2025-10-14 09:21:43.484008') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 09:21:43.488387"], ["updated_at", "2025-10-14 09:21:43.488387"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.492933', '2025-10-14 09:21:43.492933') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-14 09:21:43.493332"], ["updated_at", "2025-10-14 09:21:43.493332"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.502164', '2025-10-14 09:21:43.502165') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.502509"], ["updated_at", "2025-10-14 09:21:43.502509"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.504707', '2025-10-14 09:21:43.504707') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.505189"], ["updated_at", "2025-10-14 09:21:43.505189"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.513384', '2025-10-14 09:21:43.513385') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.525878', '2025-10-14 09:21:43.525879') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.526235"], ["updated_at", "2025-10-14 09:21:43.526235"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.531566', '2025-10-14 09:21:43.531566') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 09:21:43.531927"], ["updated_at", "2025-10-14 09:21:43.531927"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 09:21:43.533697', '2025-10-14 09:21:43.533698') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.534060"], ["updated_at", "2025-10-14 09:21:43.534060"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.534917"], ["updated_at", "2025-10-14 09:21:43.534917"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 09:21:43.536886"], ["updated_at", "2025-10-14 09:21:43.536886"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.492262', '2025-10-14 11:03:29.492265') RETURNING "key"[0m
  [1m[36mOrganization Delete All (1.4ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (2.9ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (2.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.566662"], ["updated_at", "2025-10-14 11:03:29.566662"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.581143"], ["updated_at", "2025-10-14 11:03:29.581143"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.585463"], ["updated_at", "2025-10-14 11:03:29.585463"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (1.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.623533', '2025-10-14 11:03:29.623536') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.627324"], ["updated_at", "2025-10-14 11:03:29.627324"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.645208', '2025-10-14 11:03:29.645209') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:03:29.658620"], ["updated_at", "2025-10-14 11:03:29.658620"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.671348', '2025-10-14 11:03:29.671349') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.681468"], ["updated_at", "2025-10-14 11:03:29.681468"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.688222"], ["updated_at", "2025-10-14 11:03:29.688222"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.690012"], ["updated_at", "2025-10-14 11:03:29.690012"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.699568', '2025-10-14 11:03:29.699569') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.722005', '2025-10-14 11:03:29.722006') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-14 11:03:29.723500"], ["updated_at", "2025-10-14 11:03:29.723500"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.737853', '2025-10-14 11:03:29.737855') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-14 11:03:29.738364"], ["updated_at", "2025-10-14 11:03:29.738364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.743226', '2025-10-14 11:03:29.743253') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:03:29.743706"], ["updated_at", "2025-10-14 11:03:29.743706"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.762487', '2025-10-14 11:03:29.762489') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.764364"], ["updated_at", "2025-10-14 11:03:29.764364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:03:29.768637"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.788890', '2025-10-14 11:03:29.788892') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.789619"], ["updated_at", "2025-10-14 11:03:29.789619"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.794974', '2025-10-14 11:03:29.794975') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (1.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.795684"], ["updated_at", "2025-10-14 11:03:29.795684"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.803965', '2025-10-14 11:03:29.803966') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:03:29.804428"], ["updated_at", "2025-10-14 11:03:29.804428"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.811153', '2025-10-14 11:03:29.811154') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.817541', '2025-10-14 11:03:29.817543') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.818873"], ["updated_at", "2025-10-14 11:03:29.818873"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.826903', '2025-10-14 11:03:29.827083') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.827697"], ["updated_at", "2025-10-14 11:03:29.827697"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:03:29.828396"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.832337', '2025-10-14 11:03:29.832338') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:03:29.832573"], ["updated_at", "2025-10-14 11:03:29.832573"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.837460', '2025-10-14 11:03:29.837461') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.858750', '2025-10-14 11:03:29.858751') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.874624', '2025-10-14 11:03:29.874625') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:03:29.885472"], ["updated_at", "2025-10-14 11:03:29.885472"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.0ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.896958', '2025-10-14 11:03:29.896959') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.921523', '2025-10-14 11:03:29.921524') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:03:29.929033"], ["updated_at", "2025-10-14 11:03:29.929033"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-14 11:03:29.933089"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.940010', '2025-10-14 11:03:29.940011') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.946657', '2025-10-14 11:03:29.946658') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.951739', '2025-10-14 11:03:29.951740') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:03:29.960471', '2025-10-14 11:03:29.960472') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012cfcbe08> Create (1.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 11:03:30.014150"], ["updated_at", "2025-10-14 11:03:30.014150"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012a1e0200> Create (8.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 11:11:59.635753"], ["updated_at", "2025-10-14 11:11:59.635753"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.732111', '2025-10-14 11:11:59.732113') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:11:59.789579"], ["updated_at", "2025-10-14 11:11:59.789579"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.822116', '2025-10-14 11:11:59.822117') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-14 11:11:59.823775"], ["updated_at", "2025-10-14 11:11:59.823775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.848137', '2025-10-14 11:11:59.848138') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.858405', '2025-10-14 11:11:59.858407') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:11:59.872167"], ["updated_at", "2025-10-14 11:11:59.872167"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:11:59.883580"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.910348', '2025-10-14 11:11:59.910349') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:11:59.911475"], ["updated_at", "2025-10-14 11:11:59.911475"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.932573', '2025-10-14 11:11:59.932574') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:11:59.935775"], ["updated_at", "2025-10-14 11:11:59.935775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.939600', '2025-10-14 11:11:59.939602') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.945387"], ["updated_at", "2025-10-14 11:11:59.945387"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.954586', '2025-10-14 11:11:59.954587') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.955082"], ["updated_at", "2025-10-14 11:11:59.955082"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.957430', '2025-10-14 11:11:59.957430') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.961305', '2025-10-14 11:11:59.961306') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.961783"], ["updated_at", "2025-10-14 11:11:59.961783"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.972586', '2025-10-14 11:11:59.972588') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:11:59.973453"], ["updated_at", "2025-10-14 11:11:59.973453"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.978508', '2025-10-14 11:11:59.978509') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.978884"], ["updated_at", "2025-10-14 11:11:59.978884"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.979253"], ["updated_at", "2025-10-14 11:11:59.979253"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:11:59.979699"], ["updated_at", "2025-10-14 11:11:59.979699"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.984177', '2025-10-14 11:11:59.984178') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:11:59.985327"], ["updated_at", "2025-10-14 11:11:59.985327"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:11:59.986648"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:11:59.997617', '2025-10-14 11:11:59.997618') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:11:59.998972"], ["updated_at", "2025-10-14 11:11:59.998972"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:12:00.000056"], ["updated_at", "2025-10-14 11:12:00.000056"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:12:00.004185"], ["updated_at", "2025-10-14 11:12:00.004185"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.008651', '2025-10-14 11:12:00.008830') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-14 11:12:00.010154"], ["updated_at", "2025-10-14 11:12:00.010154"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.013437', '2025-10-14 11:12:00.013438') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:12:00.013853"], ["updated_at", "2025-10-14 11:12:00.013853"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.018080', '2025-10-14 11:12:00.018081') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.025043', '2025-10-14 11:12:00.025043') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.046275', '2025-10-14 11:12:00.046276') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:12:00.055617"], ["updated_at", "2025-10-14 11:12:00.055617"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-14 11:12:00.060929"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.064791', '2025-10-14 11:12:00.064791') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.071091', '2025-10-14 11:12:00.071092') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:12:00.080452"], ["updated_at", "2025-10-14 11:12:00.080452"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.0ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.101270', '2025-10-14 11:12:00.101272') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.115687', '2025-10-14 11:12:00.115688') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.122795', '2025-10-14 11:12:00.122796') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:12:00.131277', '2025-10-14 11:12:00.131278') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.037843', '2025-10-14 11:29:38.037845') RETURNING "key"[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.057797', '2025-10-14 11:29:38.057799') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.071533', '2025-10-14 11:29:38.071535') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.7ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:29:38.086311"], ["updated_at", "2025-10-14 11:29:38.086311"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.1ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.105781', '2025-10-14 11:29:38.105783') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.119061', '2025-10-14 11:29:38.119063') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.134783', '2025-10-14 11:29:38.134784') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.148966', '2025-10-14 11:29:38.148968') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.163256', '2025-10-14 11:29:38.163258') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.188821', '2025-10-14 11:29:38.188849') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.4ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-14 11:29:38.193773"], ["updated_at", "2025-10-14 11:29:38.193773"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.6ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-14 11:29:38.199936"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x00000001264c8c00> Create (2.5ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-14 11:29:38.237599"], ["updated_at", "2025-10-14 11:29:38.237599"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.262519', '2025-10-14 11:29:38.262521') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:29:38.281796"], ["updated_at", "2025-10-14 11:29:38.281796"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.289883', '2025-10-14 11:29:38.289884') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.292665"], ["updated_at", "2025-10-14 11:29:38.292665"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.297440', '2025-10-14 11:29:38.297441') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-14 11:29:38.300517"], ["updated_at", "2025-10-14 11:29:38.300517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.308533', '2025-10-14 11:29:38.308534') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-14 11:29:38.309344"], ["updated_at", "2025-10-14 11:29:38.309344"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.321020', '2025-10-14 11:29:38.321021') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.323737"], ["updated_at", "2025-10-14 11:29:38.323737"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.327788', '2025-10-14 11:29:38.327788') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.328522"], ["updated_at", "2025-10-14 11:29:38.328522"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.332685', '2025-10-14 11:29:38.332686') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-14 11:29:38.333581"], ["updated_at", "2025-10-14 11:29:38.333581"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.337962', '2025-10-14 11:29:38.337963') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.340597"], ["updated_at", "2025-10-14 11:29:38.340597"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.341682"], ["updated_at", "2025-10-14 11:29:38.341682"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.342347"], ["updated_at", "2025-10-14 11:29:38.342347"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.348474', '2025-10-14 11:29:38.348475') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.349293"], ["updated_at", "2025-10-14 11:29:38.349293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.358938', '2025-10-14 11:29:38.358940') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.359787"], ["updated_at", "2025-10-14 11:29:38.359787"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.360497"], ["updated_at", "2025-10-14 11:29:38.360497"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.360918"], ["updated_at", "2025-10-14 11:29:38.360918"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.365755', '2025-10-14 11:29:38.365756') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.366116"], ["updated_at", "2025-10-14 11:29:38.366116"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:29:38.368411"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.382063', '2025-10-14 11:29:38.382064') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-14 11:29:38.382628"], ["updated_at", "2025-10-14 11:29:38.382628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.402351', '2025-10-14 11:29:38.402352') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.406322', '2025-10-14 11:29:38.406323') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.409745', '2025-10-14 11:29:38.409746') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.410432"], ["updated_at", "2025-10-14 11:29:38.410432"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-14 11:29:38.411823"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-14 11:29:38.416216', '2025-10-14 11:29:38.416216') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-14 11:29:38.416749"], ["updated_at", "2025-10-14 11:29:38.416749"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000126ea02a0> Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-10-15 10:53:13.557483"], ["updated_at", "2025-10-15 10:53:13.557483"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.578030', '2025-10-15 10:53:13.578032') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.623075"], ["updated_at", "2025-10-15 10:53:13.623075"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-15 10:53:13.624177"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.635885', '2025-10-15 10:53:13.635887') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.636686"], ["updated_at", "2025-10-15 10:53:13.636686"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-10-15 10:53:13.640149"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.2ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.670445', '2025-10-15 10:53:13.670447') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.671135"], ["updated_at", "2025-10-15 10:53:13.671135"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.9ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.709870', '2025-10-15 10:53:13.710135') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-15 10:53:13.724751"], ["updated_at", "2025-10-15 10:53:13.724751"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.732149', '2025-10-15 10:53:13.732150') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.736761"], ["updated_at", "2025-10-15 10:53:13.736761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.741829', '2025-10-15 10:53:13.741830') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-10-15 10:53:13.742311"], ["updated_at", "2025-10-15 10:53:13.742311"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.745329', '2025-10-15 10:53:13.745330') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-10-15 10:53:13.745654"], ["updated_at", "2025-10-15 10:53:13.745654"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.757138', '2025-10-15 10:53:13.757139') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.760356"], ["updated_at", "2025-10-15 10:53:13.760356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.768348', '2025-10-15 10:53:13.768349') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.769089"], ["updated_at", "2025-10-15 10:53:13.769089"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.774342', '2025-10-15 10:53:13.774343') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.775222"], ["updated_at", "2025-10-15 10:53:13.775222"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.776023"], ["updated_at", "2025-10-15 10:53:13.776023"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.781335"], ["updated_at", "2025-10-15 10:53:13.781335"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.787278', '2025-10-15 10:53:13.787279') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.787580"], ["updated_at", "2025-10-15 10:53:13.787580"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.794643', '2025-10-15 10:53:13.794644') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.799132', '2025-10-15 10:53:13.799133') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-10-15 10:53:13.799937"], ["updated_at", "2025-10-15 10:53:13.799937"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.804399', '2025-10-15 10:53:13.804399') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.807990', '2025-10-15 10:53:13.807991') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-10-15 10:53:13.808488"], ["updated_at", "2025-10-15 10:53:13.808488"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.813764', '2025-10-15 10:53:13.813764') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.814402"], ["updated_at", "2025-10-15 10:53:13.814402"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.814945"], ["updated_at", "2025-10-15 10:53:13.814945"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-10-15 10:53:13.815654"], ["updated_at", "2025-10-15 10:53:13.815654"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.821959', '2025-10-15 10:53:13.821960') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.832539', '2025-10-15 10:53:13.832540') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-15 10:53:13.839171"], ["updated_at", "2025-10-15 10:53:13.839171"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.0ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.846715', '2025-10-15 10:53:13.846715') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.854810', '2025-10-15 10:53:13.854811') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-10-15 10:53:13.863463"], ["updated_at", "2025-10-15 10:53:13.863463"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-10-15 10:53:13.866080"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.879013', '2025-10-15 10:53:13.879014') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_gem_can_be_disabled_to_restore_original_Rails_behavior
----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.901045', '2025-10-15 10:53:13.901046') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.905018', '2025-10-15 10:53:13.905018') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.907800', '2025-10-15 10:53:13.907800') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-10-15 10:53:13.914633', '2025-10-15 10:53:13.914634') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
Generating image variants require the image_processing gem. Please add `gem "image_processing", "~> 1.2"` to your Gemfile or set `config.active_storage.variant_processor = :disabled`.
  [1m[35m (27.5ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x000000012610ece0> Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-12-04 06:29:00.157224"], ["updated_at", "2025-12-04 06:29:00.157224"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.190988', '2025-12-04 06:29:00.190991') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-12-04 06:29:00.215586"], ["updated_at", "2025-12-04 06:29:00.215586"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.227749', '2025-12-04 06:29:00.227751') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.235020"], ["updated_at", "2025-12-04 06:29:00.235020"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.240300', '2025-12-04 06:29:00.240302') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.242869"], ["updated_at", "2025-12-04 06:29:00.242869"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.250781', '2025-12-04 06:29:00.250784') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.257823', '2025-12-04 06:29:00.257824') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.258547"], ["updated_at", "2025-12-04 06:29:00.258547"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.270392', '2025-12-04 06:29:00.270394') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.273696"], ["updated_at", "2025-12-04 06:29:00.273696"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-12-04 06:29:00.275141"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.280991', '2025-12-04 06:29:00.280992') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-12-04 06:29:00.281801"], ["updated_at", "2025-12-04 06:29:00.281801"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.299070', '2025-12-04 06:29:00.299072') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.306124', '2025-12-04 06:29:00.306126') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.307013"], ["updated_at", "2025-12-04 06:29:00.307013"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.309763', '2025-12-04 06:29:00.309764') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.311090"], ["updated_at", "2025-12-04 06:29:00.311090"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.316577', '2025-12-04 06:29:00.316579') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.317859"], ["updated_at", "2025-12-04 06:29:00.317859"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-12-04 06:29:00.318682"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.2ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.326326', '2025-12-04 06:29:00.326328') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.330080"], ["updated_at", "2025-12-04 06:29:00.330080"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.330744"], ["updated_at", "2025-12-04 06:29:00.330744"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.331148"], ["updated_at", "2025-12-04 06:29:00.331148"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.338489', '2025-12-04 06:29:00.338494') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-12-04 06:29:00.339513"], ["updated_at", "2025-12-04 06:29:00.339513"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.342840', '2025-12-04 06:29:00.342842') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:29:00.344455"], ["updated_at", "2025-12-04 06:29:00.344455"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.348198', '2025-12-04 06:29:00.348200') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.348970"], ["updated_at", "2025-12-04 06:29:00.348970"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.349672"], ["updated_at", "2025-12-04 06:29:00.349672"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-12-04 06:29:00.350101"], ["updated_at", "2025-12-04 06:29:00.350101"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.354589', '2025-12-04 06:29:00.354591') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-12-04 06:29:00.355464"], ["updated_at", "2025-12-04 06:29:00.355464"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.358629', '2025-12-04 06:29:00.358631') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-12-04 06:29:00.363319"], ["updated_at", "2025-12-04 06:29:00.363319"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-12-04 06:29:00.364289"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.366817', '2025-12-04 06:29:00.366818') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.373134', '2025-12-04 06:29:00.373136') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.376955', '2025-12-04 06:29:00.376957') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.382043', '2025-12-04 06:29:00.382045') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.389356', '2025-12-04 06:29:00.389357') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.393868', '2025-12-04 06:29:00.393870') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-12-04 06:29:00.398569"], ["updated_at", "2025-12-04 06:29:00.398569"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.0ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:29:00.401089', '2025-12-04 06:29:00.401091') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
Generating image variants require the image_processing gem. Please add `gem "image_processing", "~> 1.2"` to your Gemfile or set `config.active_storage.variant_processor = :disabled`.
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000122751228> Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2025-12-04 06:30:14.540736"], ["updated_at", "2025-12-04 06:30:14.540736"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.610787', '2025-12-04 06:30:14.610790') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.652311"], ["updated_at", "2025-12-04 06:30:14.652311"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.660268', '2025-12-04 06:30:14.660270') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2025-12-04 06:30:14.665196"], ["updated_at", "2025-12-04 06:30:14.665196"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.670016', '2025-12-04 06:30:14.670018') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2025-12-04 06:30:14.671074"], ["updated_at", "2025-12-04 06:30:14.671074"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.680488', '2025-12-04 06:30:14.680490') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.684539"], ["updated_at", "2025-12-04 06:30:14.684539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.700253', '2025-12-04 06:30:14.700255') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2025-12-04 06:30:14.701010"], ["updated_at", "2025-12-04 06:30:14.701010"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.705977', '2025-12-04 06:30:14.705979') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.707800"], ["updated_at", "2025-12-04 06:30:14.707800"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.712060', '2025-12-04 06:30:14.712063') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.712734"], ["updated_at", "2025-12-04 06:30:14.712734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.737039', '2025-12-04 06:30:14.737041') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.737733"], ["updated_at", "2025-12-04 06:30:14.737733"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-12-04 06:30:14.738336"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.742830', '2025-12-04 06:30:14.742832') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.744581"], ["updated_at", "2025-12-04 06:30:14.744581"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.747855', '2025-12-04 06:30:14.747857') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.750202"], ["updated_at", "2025-12-04 06:30:14.750202"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.767612', '2025-12-04 06:30:14.767614') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.768698"], ["updated_at", "2025-12-04 06:30:14.768698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.770007"], ["updated_at", "2025-12-04 06:30:14.770007"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.770518"], ["updated_at", "2025-12-04 06:30:14.770518"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.776800', '2025-12-04 06:30:14.776802') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2025-12-04 06:30:14.777905"], ["updated_at", "2025-12-04 06:30:14.777905"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2025-12-04 06:30:14.778518"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (2.5ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.799593', '2025-12-04 06:30:14.799608') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.809054', '2025-12-04 06:30:14.809056') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2025-12-04 06:30:14.809824"], ["updated_at", "2025-12-04 06:30:14.809824"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.812874', '2025-12-04 06:30:14.812876') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.817519', '2025-12-04 06:30:14.817522') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.818260"], ["updated_at", "2025-12-04 06:30:14.818260"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.6ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.823703"], ["updated_at", "2025-12-04 06:30:14.823703"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (1.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2025-12-04 06:30:14.827083"], ["updated_at", "2025-12-04 06:30:14.827083"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.835725', '2025-12-04 06:30:14.835727') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-12-04 06:30:14.838738"], ["updated_at", "2025-12-04 06:30:14.838738"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2025-12-04 06:30:14.839457"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.842743', '2025-12-04 06:30:14.842783') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.2ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2025-12-04 06:30:14.847061"], ["updated_at", "2025-12-04 06:30:14.847061"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.1ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.850921', '2025-12-04 06:30:14.850923') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.857018', '2025-12-04 06:30:14.857020') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.861725', '2025-12-04 06:30:14.861727') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.867910', '2025-12-04 06:30:14.867912') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.872559', '2025-12-04 06:30:14.872561') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-04 06:30:14.877378', '2025-12-04 06:30:14.877381') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
Generating image variants require the image_processing gem. Please add `gem "image_processing", "~> 1.2"` to your Gemfile or set `config.active_storage.variant_processor = :disabled`.
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_scopes_work_when_enabled
---------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.296108', '2026-01-08 08:17:12.296112') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Active Org"], ["status", 0], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.334195"], ["updated_at", "2026-01-08 08:17:12.334195"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Inactive Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.334926"], ["updated_at", "2026-01-08 08:17:12.334926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Another Active"], ["status", 0], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.335478"], ["updated_at", "2026-01-08 08:17:12.335478"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."status" = ?[0m  [["status", 0]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------
IntegrationTest: test_invalid_enum_value_raises_error
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.343177', '2026-01-08 08:17:12.343179') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------
IntegrationTest: test_user_enum_with_suffix_works
-------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.345500', '2026-01-08 08:17:12.345501') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["email", "jane@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.348585"], ["updated_at", "2026-01-08 08:17:12.348585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------
IntegrationTest: test_user_can_have_multiple_enums
--------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.351934', '2026-01-08 08:17:12.351936') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["email", "john@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.352340"], ["updated_at", "2026-01-08 08:17:12.352340"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------
IntegrationTest: test_organization_can_persist_enum_values
----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.354452', '2026-01-08 08:17:12.354453') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Persistent Org"], ["status", 1], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.354926"], ["updated_at", "2026-01-08 08:17:12.354926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------
IntegrationTest: test_organization_can_use_enum_without_database_column
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.358736', '2026-01-08 08:17:12.358738') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.359170"], ["updated_at", "2026-01-08 08:17:12.359170"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_product_enum_with_string_values_works
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.361767', '2026-01-08 08:17:12.361768') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Book"], ["price", 19.99], ["availability", nil], ["category", nil], ["created_at", "2026-01-08 08:17:12.366567"], ["updated_at", "2026-01-08 08:17:12.366567"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_gem_can_be_disabled_and_re-enabled
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.369163', '2026-01-08 08:17:12.369164') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------
IntegrationTest: test_user_can_persist_multiple_enum_values
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.371730', '2026-01-08 08:17:12.371732') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Alice"], ["email", "alice@example.com"], ["role", 1], ["notification_preference", 2], ["account_status", 1], ["created_at", "2026-01-08 08:17:12.372520"], ["updated_at", "2026-01-08 08:17:12.372520"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------
IntegrationTest: test_enum_values_can_be_updated
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.376863', '2026-01-08 08:17:12.376865') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.1ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Charlie"], ["email", "charlie@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.377729"], ["updated_at", "2026-01-08 08:17:12.377729"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2026-01-08 08:17:12.378612"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-------------------------------------------------------------
IntegrationTest: test_product_enum_with_scopes_disabled_works
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.383598', '2026-01-08 08:17:12.383600') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Laptop"], ["price", 999.99], ["availability", nil], ["category", nil], ["created_at", "2026-01-08 08:17:12.384280"], ["updated_at", "2026-01-08 08:17:12.384280"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------
IntegrationTest: test_organization_enum_with_prefix_option_works
----------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.386485', '2026-01-08 08:17:12.386486') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrganization Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "status", "subscription_tier", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Premium Org"], ["status", nil], ["subscription_tier", nil], ["created_at", "2026-01-08 08:17:12.386911"], ["updated_at", "2026-01-08 08:17:12.386911"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------
IntegrationTest: test_user_enum_with_custom_prefix_works
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.391654', '2026-01-08 08:17:12.391656') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bob"], ["email", "bob@example.com"], ["role", nil], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.392176"], ["updated_at", "2026-01-08 08:17:12.392176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------
IntegrationTest: test_product_with_existing_column_still_works
--------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.395002', '2026-01-08 08:17:12.395003') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "availability", "category", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Phone"], ["price", 499.99], ["availability", 1], ["category", nil], ["created_at", "2026-01-08 08:17:12.395573"], ["updated_at", "2026-01-08 08:17:12.395573"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
---------------------------------------------------
IntegrationTest: test_enum_works_with_where_queries
---------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.399837', '2026-01-08 08:17:12.399839') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 1"], ["email", "admin1@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.400438"], ["updated_at", "2026-01-08 08:17:12.400438"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Admin 2"], ["email", "admin2@example.com"], ["role", 2], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.400891"], ["updated_at", "2026-01-08 08:17:12.400891"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Member 1"], ["email", "member1@example.com"], ["role", 1], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.401286"], ["updated_at", "2026-01-08 08:17:12.401286"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."role" = ?[0m  [["role", 2]]
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------
IntegrationTest: test_enum_bang_methods_work
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "status" integer, "subscription_tier" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "role" integer, "notification_preference" integer, "account_status" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal(10,2), "availability" integer, "category" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.404484', '2026-01-08 08:17:12.404484') RETURNING "key"[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "role", "notification_preference", "account_status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["email", "test@example.com"], ["role", 0], ["notification_preference", nil], ["account_status", nil], ["created_at", "2026-01-08 08:17:12.404859"], ["updated_at", "2026-01-08 08:17:12.404859"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "role" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["role", 2], ["updated_at", "2026-01-08 08:17:12.405480"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrganization Delete All (0.0ms)[0m  [1m[31mDELETE FROM "organizations"[0m
  [1m[36mUser Delete All (0.0ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mProduct Delete All (0.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE organizations ADD COLUMN mbo_evaluation_create_condition INTEGER[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[36m#<Class:0x0000000127f2abe8> Create (0.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "created_at", "updated_at", "mbo_evaluation_create_condition") VALUES (?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Org"], ["created_at", "2026-01-08 08:17:12.462250"], ["updated_at", "2026-01-08 08:17:12.462250"], ["mbo_evaluation_create_condition", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS organizations[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_methods_are_available_without_database_column
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.464823', '2026-01-08 08:17:12.464824') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_works_with_nil_value_without_database_column
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.478928', '2026-01-08 08:17:12.478930') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_declaration_does_not_raise_error_without_database_column
-----------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.482170', '2026-01-08 08:17:12.482170') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------------
EnumWithoutColumnTest: test_note:_values_do_not_persist_without_database_columns
--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.485673', '2026-01-08 08:17:12.485675') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2026-01-08 08:17:12.487558"], ["updated_at", "2026-01-08 08:17:12.487558"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTestModel Load (0.0ms)[0m  [1m[34mSELECT "test_models".* FROM "test_models" WHERE "test_models"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
----------------------------------------------------------------------------------------
EnumWithoutColumnTest: test_invalid_enum_value_raises_error_even_without_database_column
----------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.489216', '2026-01-08 08:17:12.489216') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
-----------------------------------------------------------------------------------
EnumWithoutColumnTest: test_multiple_enums_can_be_declared_without_database_columns
-----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.493298', '2026-01-08 08:17:12.493299') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_with_prefix_works_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.495990', '2026-01-08 08:17:12.495991') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
--------------------------------------------------------------------------
EnumWithoutColumnTest: test_enum_bang_methods_work_without_database_column
--------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "test_models"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "test_models" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-08 08:17:12.498806', '2026-01-08 08:17:12.498807') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Create (0.1ms)[0m  [1m[32mINSERT INTO "test_models" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test"], ["created_at", "2026-01-08 08:17:12.501138"], ["updated_at", "2026-01-08 08:17:12.501138"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTestModel Update (0.1ms)[0m  [1m[33mUPDATE "test_models" SET "updated_at" = ? WHERE "test_models"."id" = ?[0m  [["updated_at", "2026-01-08 08:17:12.501634"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
